package com.kms.grupo02

rule "Nada"
	when
		$j : Jugada (picas==0, fijas==0, perdioFijas==false, aumentoFijas==false)
	then
		System.out.println("Aplicar regla: Nada");
        $j.actualizarEstado($j.getDigitoUno(), 0, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoUno(), 0, 0);   
        $j.actualizarEstado($j.getDigitoUno(), 1, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoUno(), 1, 0);  
        $j.actualizarEstado($j.getDigitoUno(), 2, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoUno(), 2, 0);
        $j.actualizarEstado($j.getDigitoUno(), 3, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoUno(), 3, 0);
        
        $j.actualizarEstado($j.getDigitoDos(), 0, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoDos(), 0, 0);   
        $j.actualizarEstado($j.getDigitoDos(), 1, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoDos(), 1, 0);  
        $j.actualizarEstado($j.getDigitoDos(), 2, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoDos(), 2, 0);
        $j.actualizarEstado($j.getDigitoDos(), 3, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoDos(), 3, 0);
        
        $j.actualizarEstado($j.getDigitoTres(), 0, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoTres(), 0, 0);   
        $j.actualizarEstado($j.getDigitoTres(), 1, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoTres(), 1, 0);  
        $j.actualizarEstado($j.getDigitoTres(), 2, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoTres(), 2, 0);
        $j.actualizarEstado($j.getDigitoTres(), 3, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoTres(), 3, 0);
        
        $j.actualizarEstado($j.getDigitoCuatro(), 0, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoCuatro(), 0, 0);   
        $j.actualizarEstado($j.getDigitoCuatro(), 1, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoCuatro(), 1, 0);  
        $j.actualizarEstado($j.getDigitoCuatro(), 2, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoCuatro(), 2, 0);
        $j.actualizarEstado($j.getDigitoCuatro(), 3, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoCuatro(), 3, 0);
        
end


rule "perdida de fijas"

	when
		$j : Jugada (perdioFijas==true)
	then
		System.out.println("perdida de fijas");
        $j.actualizarEstado($j.consultarFijaPerdida(), 3, Casilla.FIJA);
        $j.actualizarPuntaje($j.consultarFijaPerdida(), 3, 10000);   
		$j.descartarVertical(3, $j.consultarFijaPerdida());        
        $j.actualizarEstado($j.consultarFijaPerdida(), 0, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.consultarFijaPerdida(), 0, 0); 
        $j.actualizarEstado($j.consultarFijaPerdida(), 1, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.consultarFijaPerdida(), 1, 0); 
        $j.actualizarEstado($j.consultarFijaPerdida(), 2, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.consultarFijaPerdida(), 2, 0);        
        
                  
end


rule "Aumento fijas"
	when
		$j : Jugada (aumentoFijas ==true)
	then
		System.out.println("Aplicar regla: Aumento fijas");
		$j.actualizarEstado($j.consultarFijaGanada(), 2, Casilla.FIJA);
        $j.actualizarPuntaje($j.consultarFijaGanada(), 2, 10000);   
		$j.descartarVertical(2, $j.consultarFijaGanada());
		$j.descartarHorizontal($j.consultarFijaGanada(),2);
		//Buscar jugadas donde esta fue fija 
		$j.descartarFijasJugadaAnterior($j.consultarFijaGanada());            
        
                  
end


rule "Una pica"
	when
		$j : Jugada (picas==1, fijas==0, perdioFijas==false, aumentoFijas==false)
	then
		System.out.println("Aplicar regla: Una pica");
        $j.actualizarEstado($j.getDigitoUno(), 0, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoUno(), 0, 0);   
        $j.actualizarEstado($j.getDigitoUno(), 1, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoUno(), 1, 9);  
        $j.actualizarEstado($j.getDigitoDos(), 0, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoDos(), 0, 9);
        $j.actualizarEstado($j.getDigitoDos(), 1, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoDos(), 1, 0);  
end


rule "Una fija"
	when
		$j : Jugada (picas==0, fijas==1, perdioFijas==false, aumentoFijas==false)
	then
		System.out.println("Aplicar regla: Una fija");
        $j.actualizarEstado($j.getDigitoUno(), 0, Casilla.PICA_FIJA);
        $j.actualizarPuntaje($j.getDigitoUno(), 0, (504*3));
        $j.actualizarEstado($j.getDigitoUno(), 1, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoUno(), 1, 0);  
        $j.actualizarEstado($j.getDigitoUno(), 2, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoUno(), 2, 0);
        $j.actualizarEstado($j.getDigitoUno(), 3, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoUno(), 3, 0);  
        $j.actualizarEstado($j.getDigitoDos(), 0, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoDos(), 0, 0);
        $j.actualizarEstado($j.getDigitoDos(), 1, Casilla.PICA_FIJA);
        $j.actualizarPuntaje($j.getDigitoDos(), 1, (504*3));  
        $j.actualizarEstado($j.getDigitoDos(), 2, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoDos(), 2, 0);
        $j.actualizarEstado($j.getDigitoDos(), 3, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoDos(), 3, 0);  
        $j.actualizarEstado($j.getDigitoTres(), 0, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoTres(), 0, 0);
        $j.actualizarEstado($j.getDigitoTres(), 1, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoTres(), 1, 0);  
        $j.actualizarEstado($j.getDigitoTres(), 2, Casilla.PICA_FIJA);
        $j.actualizarPuntaje($j.getDigitoTres(), 2, (504*3));
        $j.actualizarEstado($j.getDigitoTres(), 3, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoTres(), 3, 0);          
        $j.actualizarEstado($j.getDigitoCuatro(), 0, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoCuatro(), 0, 0);
        $j.actualizarEstado($j.getDigitoCuatro(), 1, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoCuatro(), 1, 0);  
        $j.actualizarEstado($j.getDigitoCuatro(), 2, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoCuatro(), 2, 0);
        $j.actualizarEstado($j.getDigitoCuatro(), 3, Casilla.PICA_FIJA);
        $j.actualizarPuntaje($j.getDigitoCuatro(), 3, (504*3));
                          
end


rule "Una pica y 1 fija"
	when
		$j : Jugada (picas==1, fijas==1, perdioFijas==false, aumentoFijas==false)
	then
		System.out.println("Aplicar regla: Una pica y 1 fija");
        $j.actualizarEstado($j.getDigitoUno(), 0, Casilla.PICA_FIJA);
        $j.actualizarPuntaje($j.getDigitoUno(), 0, (504*3)); 
        $j.actualizarEstado($j.getDigitoUno(), 1, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoUno(), 1, (504/3));  
        $j.actualizarEstado($j.getDigitoUno(), 2, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoUno(), 2, (504/3));
        $j.actualizarEstado($j.getDigitoUno(), 3, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoUno(), 3, (504/3));
        $j.actualizarEstado($j.getDigitoDos(), 1, Casilla.PICA_FIJA);
        $j.actualizarPuntaje($j.getDigitoDos(), 1, (504*3));
        $j.actualizarEstado($j.getDigitoDos(), 0, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoDos(), 0, (504/3));
        $j.actualizarEstado($j.getDigitoDos(), 2, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoDos(), 2, (504/3));
        $j.actualizarEstado($j.getDigitoDos(), 3, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoDos(), 3, (504/3));
        $j.actualizarEstado($j.getDigitoTres(), 2, Casilla.PICA_FIJA);
        $j.actualizarPuntaje($j.getDigitoTres(), 2, (504*3));
        $j.actualizarEstado($j.getDigitoTres(), 0, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoTres(), 0, (504/3));
        $j.actualizarEstado($j.getDigitoTres(), 1, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoTres(), 1, (504/3));
        $j.actualizarEstado($j.getDigitoTres(), 3, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoTres(), 3, (504/3));
        $j.actualizarEstado($j.getDigitoCuatro(), 3, Casilla.PICA_FIJA);
        $j.actualizarPuntaje($j.getDigitoCuatro(), 3, (504*3));
        $j.actualizarEstado($j.getDigitoCuatro(), 0, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoCuatro(), 0, (504/3));
        $j.actualizarEstado($j.getDigitoCuatro(), 1, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoCuatro(), 1, (504/3));
        $j.actualizarEstado($j.getDigitoCuatro(), 2, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoCuatro(), 2, (504/3));
        
          
end


rule "Una fija y 2 picas"
	when
		$j : Jugada (picas==2, fijas==1, perdioFijas==false, aumentoFijas==false)
	then
		System.out.println("Aplicar regla: Una fija y 2 picas");
        $j.actualizarEstado($j.getDigitoUno(), 0, Casilla.PICA_FIJA);
        $j.actualizarPuntaje($j.getDigitoUno(), 0, (504*3)); 
        $j.actualizarEstado($j.getDigitoUno(), 1, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoUno(), 1, (504/2));  
        $j.actualizarEstado($j.getDigitoUno(), 2, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoUno(), 2, (504/2));
        $j.actualizarEstado($j.getDigitoUno(), 3, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoUno(), 3, (504/2));
        
        $j.actualizarEstado($j.getDigitoDos(), 1, Casilla.PICA_FIJA);
        $j.actualizarPuntaje($j.getDigitoDos(), 1, (504*3));
        $j.actualizarEstado($j.getDigitoDos(), 0, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoDos(), 0, (504/2));
        $j.actualizarEstado($j.getDigitoDos(), 2, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoDos(), 2, (504/2));
        $j.actualizarEstado($j.getDigitoDos(), 3, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoDos(), 3, (504/2));
        
        $j.actualizarEstado($j.getDigitoTres(), 2, Casilla.PICA_FIJA);
        $j.actualizarPuntaje($j.getDigitoTres(), 2, (504*3));
        $j.actualizarEstado($j.getDigitoTres(), 0, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoTres(), 0, (504/2));
        $j.actualizarEstado($j.getDigitoTres(), 1, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoTres(), 1, (504/2));
        $j.actualizarEstado($j.getDigitoTres(), 3, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoTres(), 3, (504/2));
        
        $j.actualizarEstado($j.getDigitoCuatro(), 3, Casilla.PICA_FIJA);
        $j.actualizarPuntaje($j.getDigitoCuatro(), 3, (504*3));
        $j.actualizarEstado($j.getDigitoCuatro(), 0, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoCuatro(), 0, (504/2));
        $j.actualizarEstado($j.getDigitoCuatro(), 1, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoCuatro(), 1, (504/2));
        $j.actualizarEstado($j.getDigitoCuatro(), 2, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoCuatro(), 2, (504/2));
               
end


rule "1 pica y 2 fijas"
	when
		$j : Jugada (picas==1, fijas==2, perdioFijas==false, aumentoFijas==false)
	then
		System.out.println("Aplicar regla: 1 pica y 2 fijas");
        $j.actualizarEstado($j.getDigitoUno(), 0, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoUno(), 0, 0);   
        $j.actualizarEstado($j.getDigitoUno(), 1, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoUno(), 1, 504);  
        //$j.actualizarEstado($j.getDigitoDos(), 0, Casilla.PICA);
        //$j.actualizarPuntaje($j.getDigitoDos(), 0, 504);
        $j.actualizarEstado($j.getDigitoDos(), 1, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoDos(), 1, 0);  
end


rule "3 picas"
	when
		$j : Jugada (picas==3, fijas==0, perdioFijas==false, aumentoFijas==false)
	then
		System.out.println("Aplicar regla: 3 picas");
        $j.actualizarEstado($j.getDigitoUno(), 0, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoUno(), 0, 0);   
        $j.actualizarEstado($j.getDigitoUno(), 1, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoUno(), 1, (504*(3/3)));  
        $j.actualizarEstado($j.getDigitoUno(), 2, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoUno(), 2, (504*(3/3)));
        $j.actualizarEstado($j.getDigitoUno(), 3, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoUno(), 3, (504*(3/3)));  
        
        $j.actualizarEstado($j.getDigitoDos(), 0, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoDos(), 0, (504*(3/3)));   
        $j.actualizarEstado($j.getDigitoDos(), 1, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoDos(), 1, 0);  
        $j.actualizarEstado($j.getDigitoDos(), 2, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoDos(), 2, (504*(3/3)));
        $j.actualizarEstado($j.getDigitoDos(), 3, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoDos(), 3, (504*(3/3)));
        
        $j.actualizarEstado($j.getDigitoTres(), 0, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoTres(), 0, (504*(3/3)));   
        $j.actualizarEstado($j.getDigitoTres(), 1, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoTres(), 1, (504*(3/3)));  
        $j.actualizarEstado($j.getDigitoTres(), 2, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoTres(), 2, 0);
        $j.actualizarEstado($j.getDigitoTres(), 3, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoTres(), 3, (504*(3/3)));
        
        $j.actualizarEstado($j.getDigitoCuatro(), 0, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoCuatro(), 0, (504*(3/3)));   
        $j.actualizarEstado($j.getDigitoCuatro(), 1, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoCuatro(), 1, (504*(3/3)));  
        $j.actualizarEstado($j.getDigitoCuatro(), 2, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoCuatro(), 2, (504*(3/3)));
        $j.actualizarEstado($j.getDigitoCuatro(), 3, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoCuatro(), 3, 0);        
                  
end


rule "4 picas"
	when
		$j : Jugada (picas==4, fijas==0, perdioFijas==false, aumentoFijas==false)
	then
		System.out.println("Aplicar regla: 4 picas");
        $j.actualizarEstado($j.getDigitoUno(), 0, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoUno(), 0, 0);   
        $j.actualizarEstado($j.getDigitoUno(), 1, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoUno(), 1, (504*(3/3)));  
        $j.actualizarEstado($j.getDigitoUno(), 2, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoUno(), 2, (504*(3/3)));
        $j.actualizarEstado($j.getDigitoUno(), 3, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoUno(), 3, (504*(3/3)));  
        
        $j.actualizarEstado($j.getDigitoDos(), 0, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoDos(), 0, (504*(3/3)));   
        $j.actualizarEstado($j.getDigitoDos(), 1, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoDos(), 1, 0);  
        $j.actualizarEstado($j.getDigitoDos(), 2, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoDos(), 2, (504*(3/3)));
        $j.actualizarEstado($j.getDigitoDos(), 3, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoDos(), 3, (504*(3/3)));
        
        $j.actualizarEstado($j.getDigitoTres(), 0, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoTres(), 0, (504*(3/3)));   
        $j.actualizarEstado($j.getDigitoTres(), 1, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoTres(), 1, (504*(3/3)));  
        $j.actualizarEstado($j.getDigitoTres(), 2, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoTres(), 2, 0);
        $j.actualizarEstado($j.getDigitoTres(), 3, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoTres(), 3, (504*(3/3)));
        
        $j.actualizarEstado($j.getDigitoCuatro(), 0, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoCuatro(), 0, (504*(3/3)));   
        $j.actualizarEstado($j.getDigitoCuatro(), 1, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoCuatro(), 1, (504*(3/3)));  
        $j.actualizarEstado($j.getDigitoCuatro(), 2, Casilla.PICA);
        $j.actualizarPuntaje($j.getDigitoCuatro(), 2, (504*(3/3)));
        $j.actualizarEstado($j.getDigitoCuatro(), 3, Casilla.DESCARTADO);
        $j.actualizarPuntaje($j.getDigitoCuatro(), 3, 0);        
        
        $j.descartarResto();
                  
end